import { Callout } from 'nextra/components'
import { Steps } from 'nextra/components'

## üìÑ Document Search Examples


PageIndex currently enables reasoning-based RAG within a single document by default.

For users who need to search across multiple documents, we provide two best-practice workflows below for different scenarios.

---
### Metadata-based Document Search
<Callout>PageIndex with metadata support is in closed beta. Fill out this form to request early access to this feature.</Callout>

This approach works well when your documents can be distinguished by their metadata.

**Examples include:**

- Financial reports categorized by company and time period
- Legal documents categorized by case type
- Medical records categorized by patient or condition
- And many others

In such cases, you can search documents  by leveraging their metadata. A popular method is to use "Query to SQL" for  document retrieval.


#### Example Pipeline
<Steps>

#### 1. Set up SQL tables

Store documents along with their metadata and the PageIndex `doc_id` in a database table.

#### 2. Query to SQL

Use an LLM to transform a user‚Äôs retrieval request into a SQL query to fetch relevant documents.

#### 3. Retrieve with PageIndex

Use the PageIndex `doc_id` of the retrieved documents to perform further retrieval via the PageIndex retrieval API.
</Steps>




---

### Description-based Document Search

For documents that can‚Äôt be easily distinguished by metadata, you can use LLM-generated descriptions to help with document selection.


#### Example Pipeline

<Steps>

#### 1. Description Generation

Generate a description for each document based on its PageIndex tree structure and node summaries.

#### 2. Search with LLM

Use an LLM to select relevant documents by comparing the user query against the generated descriptions.

Below is a sample prompt for selecting documents based on their descriptions:

```python
prompt = f""" 
You are given a list of documents with their IDs, file names, and descriptions. Your task is to select documents that may contain information relevant to answering the user query.

Query: {query}

Documents: [
    {
        "doc_id": "xxx",
        "doc_name": "xxx",
        "doc_description": "xxx"
    }
]

Response Format:
{{
    "thinking": "<Your reasoning for document selection>",
    "answer": <Python list of relevant doc_ids>, e.g. ['doc_id1', 'doc_id2']. Return [] if no documents are relevant.
}}

Return only the JSON structure, with no additional output.
"""
```

</Steps>


## üí¨ Help & Community
Contact us if you need any advice on conducting document searches for your use case.

- ü§ù [Join our Discord](https://discord.gg/VuXuf29EUj)  
- üì® [Leave us a message](https://ii2abc2jejf.typeform.com/to/meB40zV0)