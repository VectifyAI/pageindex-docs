import { Callout } from 'nextra/components'

## 🚀 Quickstart: PageIndex API

Get started with PageIndex by first getting your 🔑 [API key](https://pageindex.vectify.ai/api-keys).

The PageIndex API consists of two main components:

* **PageIndex Tree Generation**: Upload a document to generate a PageIndex tree index.
* **PageIndex Retrieval**: Ask a query to retrieve relevant content from a document.

This document provides a brief introduction to using the API and includes example response formats.



### 🌲 PageIndex Tree Generation

Use this API to extract and return a PageIndex structure from a document.

<Callout type="info">
  Currently accepts **PDF files only** (more formats coming soon).
</Callout>

**Endpoints**

| Endpoint                                     | Method | Description                               |
| -------------------------------------------- | ------ | ----------------------------------------- |
| `https://api.vectify.ai/pageindex/`          | POST   | Submit a document to generate a PageIndex tree |
| `https://api.vectify.ai/pageindex/{doc_id}/` | GET    | Get status and tree generation result of a document       |
| `https://api.vectify.ai/pageindex/{doc_id}/` | DELETE | Delete a document and its PageIndex tree  |

**Example (Python)**

```python
import requests

api_key = "YOUR_API_KEY"
file_path = "./2023-annual-report.pdf"

# Submit document for PageIndex tree generation
with open(file_path, 'rb') as file:
    submit_response = requests.post(
        "https://api.vectify.ai/pageindex/",
        headers={"api_key": api_key},
        files={"file": file}
    )

doc_id = submit_response.json().get("doc_id")

# Check processing status and retrieve result
status_response = requests.get(
    f"https://api.vectify.ai/pageindex/{doc_id}/",
    headers={"api_key": api_key}
)
status_data = status_response.json()

if status_data.get("status") == "completed":
    print("PageIndex Tree Structure:", status_data.get("result"))
```



### 🔎 PageIndex Retrieval

Use this API to retrieve relevant content from a document. This requires a completed PageIndex tree generation (`doc_id`).

<Callout type="info">
  Retrieval function requires a completed PageIndex tree generation.
</Callout>

<Callout type="info">
  Currently only support one document retrieval, multiple document retrieval is coming soon. See also [Doc Search](/docSearch) page for docuemnt search examples.
</Callout>

**Endpoints**

| Endpoint                                                          | Method | Description                                                 |
| ----------------------------------------------------------------- | ------ | ----------------------------------------------------------- |
| `https://api.vectify.ai/pageindex/{doc_id}?query=YOUR_QUERY_TEXT` | GET    | Submit a query to retrieve relevant content from a document |
| `https://api.vectify.ai/pageindex/retrieval/{retrieval_id}/`      | GET    | Get retrieval result and status                             |

**Example (Python)**

```python
import requests

api_key = "YOUR_API_KEY"
doc_id = "YOUR_PAGEINDEX_DOC_ID"
query = "What are the main risk factors?"

# Submit retrieval query (single GET request)
retrieval_response = requests.get(
    f"https://api.vectify.ai/pageindex/{doc_id}?query={query}",
    headers={'api_key': api_key}
)
retrieval_id = retrieval_response.json().get("retrieval_id")

# Check status and retrieve result
status_response = requests.get(
    f"https://api.vectify.ai/pageindex/retrieval/{retrieval_id}/",
    headers={'api_key': api_key}
)
status_data = status_response.json()

if status_data.get("status") == "completed":
    print("Retrieved Content:", status_data.get("retrieved_nodes"))
```

👉 See the full [API Reference](/api) for optional parameters, error codes, and integration guides.


## 💬 Support

* 🤝 [Join our Discord](https://discord.gg/VuXuf29EUj)
* 📨 [Leave us a message](https://ii2abc2jejf.typeform.com/to/meB40zV0)