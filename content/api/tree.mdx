# Tree Generation API

### Submit Document for Tree Generation

* **Endpoint:** `POST` `https://api.vectify.ai/pageindex/`
* **Description:** Upload a PDF document to generate a PageIndex hierarchical tree. Immediately returns a document identifier (`doc_id`) for subsequent operations.

**Request Body (multipart/form-data):**

* `file` (binary, required): PDF document.

**Optional fields:**

* `model`: The OpenAI model to use (default: `"gpt-4o-2024-11-20"`).
* `if_add_node_id`: Whether to include a node ID for each node (`"yes"` / `"no"`; default: `"yes"`).
* `if_add_node_text`: Whether to include the full text for each node (`"yes"` / `"no"`; default: `"no"`).
* `if_add_node_summary`: Whether to include a summary for each node (`"yes"` / `"no"`; default: `"no"`).
* `if_add_doc_description`: Whether to include a document-level description (`"yes"` / `"no"`; default: `"yes"`).

**Example:**

```python
with open("./2023-annual-report.pdf", "rb") as file:
    response = requests.post(
        "https://api.vectify.ai/pageindex/",
        headers={"api_key": "YOUR_API_KEY_HERE"},
        files={"file": file}
    )
```

**Example (with optional parameters)**

```python
with open("./2023-annual-report.pdf", "rb") as file:
    response = requests.post(
        "https://api.vectify.ai/pageindex/",
        headers={"api_key": "YOUR_API_KEY_HERE"},
        files={"file": file},
        data={
            "if_add_doc_description": "no"
        }
    )
```

**Example Response:**

```json
{ "doc_id": "abc123def456" }
```

---

### Get Processing Status & Tree Structure

* **Endpoint:**  `GET` `https://api.vectify.ai/pageindex/{doc_id}/`
* **Description:**  Check processing status and (when complete) get the PageIndex tree for a submitted document.

**Parameters (URL Path):**

* `doc_id` (string, required): Document ID.

**Example:**

```python
doc_id = "abc123def456"

response = requests.get(
    f"https://api.vectify.ai/pageindex/{doc_id}/",
    headers={"api_key": "YOUR_API_KEY_HERE"}
)
```

**Example Response (Processing):**

```json
{
  "doc_id": "abc123def456",
  "status": "processing"
}
```

**Example Response (Completed):**

```json
{
  "doc_id": "abc123def456",
  "status": "completed",
  "result": [
    ...
    {
      "title": "Financial Stability",
      "node_id": "0006",
      "start_index": 21,
      "end_index": 22,
      "summary": "The Federal Reserve maintains financial stability by...",
      "nodes": [
        {
          "title": "Monitoring Financial Vulnerabilities",
          "node_id": "0007",
          "start_index": 22,
          "end_index": 28,
          "summary": "The Federal Reserve's monitoring focuses on..."
        },
        {
          "title": "Domestic and International Cooperation and Coordination",
          "node_id": "0008",
          "start_index": 28,
          "end_index": 31,
          "summary": "In 2023, the Federal Reserve collaborated internationally..."
        }
      ]
    }
    ...
  ]
}
```

---

### Delete a PageIndex Document

* **Endpoint:**  `DELETE` `https://api.vectify.ai/pageindex/{doc_id}/`
* **Description:**  Permanently delete a PageIndex document and all its associated data.

**Parameters (URL Path):**

* `doc_id` (string, required): Document ID.

**Example:**

```python
doc_id = "abc123def456"

response = requests.delete(
    f"https://api.vectify.ai/pageindex/{doc_id}/",
    headers={"api_key": "YOUR_API_KEY_HERE"}
)
```

---

## üí¨ Support

* ü§ù [Join our Discord](https://discord.gg/VuXuf29EUj)
* üì® [Contact Us](https://ii2abc2jejf.typeform.com/to/meB40zV0)